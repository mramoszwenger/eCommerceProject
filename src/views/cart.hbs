<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Carrito de Compras</title>
    <link rel="stylesheet" href="/css/styles.css">
</head>
<body>
    <header>
        <h1>Tu Carrito</h1>
        <a href="/products" class="back-to-shop">Volver a la tienda</a>
    </header>

    {{#if cart.products.length}}
    <table>
        <thead>
            <tr>
                <th>Producto</th>
                <th>Cantidad</th>
                <th>Precio Unitario</th>
                <th>Subtotal</th>
                <th>Acciones</th>
            </tr>
        </thead>
        <tbody>
            {{#each cart.products}}
            <tr>
                <td>{{this.product.title}}</td>
                <td>
                    <input type="number" value="{{this.quantity}}" min="1" class="quantity-input" data-product-id="{{this.product._id}}">
                </td>
                <td>${{this.product.price}}</td>
                <td>${{multiply this.product.price this.quantity}}</td>
                <td>
                    <button class="update-quantity" data-product-id="{{this.product._id}}">Actualizar</button>
                    <button class="remove-product" data-product-id="{{this.product._id}}">Eliminar</button>
                </td>
            </tr>
            {{/each}}
        </tbody>
    </table>

    <div class="cart-total">
        <strong>Total: ${{calculateTotal cart.products}}</strong>
    </div>

    <button id="purchase-button">Finalizar Compra</button>
    <button id="clear-cart">Vaciar Carrito</button>

    {{else}}
    <p>Tu carrito está vacío. <a href="/products">Volver a la tienda</a></p>
    {{/if}}

    <script src="/js/cart.js"></script>
</body>
</html>
